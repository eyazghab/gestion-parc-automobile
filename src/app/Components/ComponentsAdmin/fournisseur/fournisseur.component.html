<div class="container mt-5">
  <h2 class="mb-4 text-center text-primary">Gestion des Fournisseurs</h2>

  <!-- Recherche -->
  <div class="mb-4">
    <input type="text" [(ngModel)]="searchTerm" (input)="search()" 
           placeholder="Rechercher un fournisseur..." 
           class="form-control form-control-lg shadow-sm">
  </div>

  <!-- Bouton Ajouter -->
<div class="text-end mb-3">
  <button class="btn btn-success btn-lg" (click)="showFormForAdd()">
    <i class="bi bi-plus-circle"></i> Ajouter un Fournisseur
  </button>
</div>

  <!-- Tableau -->
  <div class="table-responsive shadow-sm rounded mb-4">
    <table class="table table-hover align-middle">
      <thead class="table-primary text-center">
        <tr>
          <th>Nom</th>
          <th>Adresse</th>
          <th>Contact</th>
          <th>Type de Service</th>
          <th>État</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let f of fournisseurs" class="text-center">
          <td>{{ f.nomFournisseur }}</td>
          <td>{{ f.adresse }}</td>
          <td>{{ f.contact }}</td>
          <td>{{ f.typeService }}</td>
          <td>
            <span [class]="f.actif ? 'badge bg-success' : 'badge bg-secondary'">
              {{ f.actif ? 'Actif' : 'Inactif' }}
            </span>
          </td>
          <td>
            <button class="btn btn-outline-primary btn-sm me-1" (click)="edit(f)">
              <i class="bi bi-pencil"></i> Modifier
            </button>
            <button class="btn btn-outline-danger btn-sm me-1" (click)="delete(f.idFournisseur!)">
              <i class="bi bi-trash"></i> Supprimer
            </button>
            <button class="btn btn-outline-warning btn-sm" (click)="toggleActivation(f)">
              <i class="bi" [ngClass]="f.actif ? 'bi-x-circle' : 'bi-check-circle'"></i>
              {{ f.actif ? 'Désactiver' : 'Activer' }}
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Formulaire (affiché uniquement si showForm est true) -->
  <div *ngIf="showForm" class="card shadow-sm p-4 mb-4">
    <h4 class="mb-3">{{ selectedFournisseur.idFournisseur ? 'Modifier' : 'Ajouter' }} un Fournisseur</h4>
    <form (ngSubmit)="save()" class="row g-3">
      <div class="col-md-6">
        <input class="form-control" placeholder="Nom" 
               [(ngModel)]="selectedFournisseur.nomFournisseur" name="nom" required>
      </div>
      <div class="col-md-6">
        <input class="form-control" placeholder="Adresse" 
               [(ngModel)]="selectedFournisseur.adresse" name="adresse" required>
      </div>
      <div class="col-md-6">
        <input class="form-control" placeholder="Contact" 
               [(ngModel)]="selectedFournisseur.contact" name="contact" required>
      </div>
      <div class="col-md-6">
        <input class="form-control" placeholder="Type de Service" 
               [(ngModel)]="selectedFournisseur.typeService" name="typeService" required>
      </div>
      <div class="col-12 text-end">
        <button class="btn btn-success btn-lg" type="submit">
          <i class="bi bi-save"></i> Enregistrer
        </button>
        <button class="btn btn-secondary btn-lg ms-2" type="button" (click)="cancelForm()">
          Annuler
        </button>
      </div>
    </form>
  </div>
</div>
