<div class="container mt-4">

  <p class="alert alert-danger" *ngIf="error">{{ error }}</p>

  <button class="btn btn-success mb-3" style="float: right;" (click)="showAddForm = !showAddForm">
    {{ showAddForm ? 'Annuler' : 'Ajouter un dépôt' }}
  </button>
  <div style="clear: both;"></div>

  <div *ngIf="showAddForm" class="form-container mb-4">
    <form (ngSubmit)="addDepot()" #depotForm="ngForm">

      <label for="nom">Nom</label>
      <input id="nom" type="text" required [(ngModel)]="newDepot.nom" name="nom" class="form-control mb-2" #nom="ngModel" />
      <div *ngIf="nom.invalid && nom.touched" class="text-danger mb-2">
        Le nom est obligatoire.
      </div>

      <label for="localisation">Localisation</label>
      <input id="localisation" type="text" required [(ngModel)]="newDepot.localisation" name="localisation" class="form-control mb-2" #loc="ngModel" />
      <div *ngIf="loc.invalid && loc.touched" class="text-danger mb-2">
        La localisation est obligatoire.
      </div>

      <button type="submit" class="btn btn-primary" [disabled]="depotForm.invalid">Ajouter</button>
    </form>
  </div>

  <div class="table-responsive">
    <table class="table table-striped table-bordered align-middle">
      <thead class="table-primary text-center">
        <tr>
          <th>Nom</th>
          <th>Localisation</th>
          <th class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let depot of depots" class="align-middle">
          <td>{{ depot.nom }}</td>
          <td>{{ depot.localisation }}</td>
          <td class="text-center">
            <!-- exemple d'action : suppression -->
            <button class="btn btn-danger btn-sm" (click)="deleteDepot(depot.idDepot)" title="Supprimer">
              <i class="bi bi-trash"></i> Supprimer
            </button>
          </td>
        </tr>
        <tr *ngIf="depots.length === 0">
          <td colspan="3" class="text-center text-muted">Aucun dépôt trouvé</td>
        </tr>
      </tbody>
    </table>
  </div>

</div>
