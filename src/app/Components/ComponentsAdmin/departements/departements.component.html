<table class="table table-striped table-bordered align-middle shadow-sm">
  <thead class="table-primary text-center">
    <tr>
      <th>Entreprise</th>
      <th>Nom</th>
      <th>Responsable</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let group of getGroupedDepartements()">
      <!-- Ligne titre du groupe -->
      <tr class="table-secondary">
        <td colspan="4"><strong>{{ group.nom }}</strong></td>
      </tr>

      <!-- Lignes des dÃ©partements du groupe -->
      <tr *ngFor="let d of group.departements" class="align-middle">
        <td>{{ d.entreprise?.nomEntreprise }}</td>
        <td>{{ d.nom }}</td>
        <td>{{ d.responsable }}</td>
        <td class="text-center">
          <button class="btn btn-sm btn-warning me-2" (click)="editDepartement(d.id)">
            <i class="bi bi-pencil"></i> Modifier
          </button>
          <button *ngIf="d.id !== undefined" (click)="deleteDepartement(d.id!)" class="btn btn-danger">
            Supprimer
          </button>
          <div *ngIf="d.id !== undefined && departementErrors[d.id]" class="alert alert-danger mt-2">
            {{ departementErrors[d.id] }}
          </div>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>
